# Advanced pipe operator test: user-defined functions

meow test_pipe_user_function() {
  expect(5 |=| double, 10)
  expect(3 |=| square, 9)
  expect(7 |=| negate, -7)
}

meow test_pipe_chain_user_functions() {
  expect(3 |=| double |=| square, 36)
  expect(2 |=| square |=| double, 8)
}

meow test_pipe_mixed_user_and_lambda() {
  expect(5 |=| double |=| paw(x) { x + 1 }, 11)
  expect(4 |=| paw(x) { x + 1 } |=| double, 10)
}

meow test_pipe_list_with_user_function() {
  nyan nums = [1, 2, 3, 4, 5]
  nyan total = nums |=| picky(paw(x) { x % 2 != 0 }) |=| curl(0, paw(acc, x) { acc + x })
  # odds: [1,3,5], sum: 9
  expect(total, 9)
}
