# Advanced pipe operator test: user-defined functions

meow test_pipe_user_function() {
  expect(5 |=| double, 10)
  expect(3 |=| square, 9)
  expect(7 |=| negate, -7)
}

meow test_pipe_chain_user_functions() {
  expect(3 |=| double |=| square, 36)
  expect(2 |=| square |=| double, 8)
}

meow test_pipe_mixed_user_and_lambda() {
  expect(5 |=| double |=| paw(x) { x + 1 }, 11)
  expect(4 |=| paw(x) { x + 1 } |=| double, 10)
}

meow test_pipe_list_with_user_function() {
  nyan nums = [1, 2, 3, 4, 5]
  nyan total = nums |=| picky(paw(x) { x % 2 != 0 }) |=| curl(0, paw(acc, x) { acc + x })
  # odds: [1,3,5], sum: 9
  expect(total, 9)
}

meow test_double_edge_cases() {
  expect(0 |=| double, 0)
  expect(1 |=| double, 2)
  expect(-1 |=| double, -2)
}

meow test_negate_specific_values() {
  expect(0 |=| negate, 0)
  expect(1 |=| negate, -1)
  expect(-1 |=| negate, 1)
  expect(5 |=| negate, -5)
}

meow test_square_specific_values() {
  expect(0 |=| square, 0)
  expect(1 |=| square, 1)
  expect(2 |=| square, 4)
  expect(-3 |=| square, 9)
}
